{"swagger":"2.0","info":{"version":"1.0","title":"Tag x00 API","contact":{"name":"Trap x00","url":"https://github.com/trapx00","email":"445073309@qq.com"},"license":{}},"host":"localhost:8080","basePath":"/","tags":[{"name":"requester-mission-controller","description":"Requester Mission Controller"},{"name":"public-mission-controller","description":"Public Mission Controller"},{"name":"user-controller","description":"User Controller"},{"name":"mission-upload-controller","description":"Mission Upload Controller"},{"name":"worker-mission-controller","description":"Worker Mission Controller"}],"paths":{"/account/login":{"get":{"tags":["user-controller"],"summary":"用户登录","description":"验证用户登录并返回token","operationId":"loginUsingGET","consumes":["application/json"],"produces":["*/*"],"parameters":[{"in":"body","name":"username","description":"用户名","required":true,"schema":{"type":"string"}},{"in":"body","name":"password","description":"密码","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/UserLoginResponse"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/WrongResponse"}},"500":{"description":"Failure","schema":{"$ref":"#/definitions/WrongResponse"}},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/account/register":{"post":{"tags":["user-controller"],"summary":"用户注册","description":"验证是否存在同样的用户名，帮助用户注册，并返回token","operationId":"registerUsingPOST","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"username","description":"用户名","required":true,"schema":{"type":"string"}},{"in":"body","name":"password","description":"密码","required":true,"schema":{"type":"string"}},{"in":"body","name":"email","description":"电子邮箱地址","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Response"}},"201":{"description":"Success","schema":{"$ref":"#/definitions/UserRegisterResponse"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"503":{"description":"Failure","schema":{"$ref":"#/definitions/WrongResponse"}},"409":{"description":"Conflict","schema":{"$ref":"#/definitions/WrongResponse"}}}}},"/mission":{"get":{"tags":["public-mission-controller"],"summary":"获得所有任务","description":"获得本站所有现有有的任务信息","operationId":"getAllMissionsUsingGET","consumes":["application/json"],"produces":["*/*"],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/MissionPublicResponse"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}},"post":{"tags":["requester-mission-controller"],"summary":"发布任务","description":"发布者发布一个任务","operationId":"createMissionUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"in":"body","name":"mission","description":"mission","required":true,"schema":{"$ref":"#/definitions/MissionCreateVo"}},{"in":"body","name":"title","description":"任务标题","required":true,"schema":{"type":"string"}},{"in":"body","name":"description","description":"任务描述","required":true,"schema":{"type":"string"}},{"in":"body","name":"topics","description":"任务主题","required":true,"schema":{"type":"string"}},{"in":"body","name":"allowedTags","description":"允许的标注","required":true,"schema":{"type":"string"}},{"in":"body","name":"missionVo","description":"任务种类","required":true,"schema":{"type":"string"}},{"in":"body","name":"start","description":"开始时间","required":true,"schema":{"type":"string"}},{"in":"body","name":"end","description":"结束时间","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/MissionCreateResponse"}},"201":{"description":"Created"},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/WrongResponse"}},"500":{"description":"Failure","schema":{"$ref":"#/definitions/WrongResponse"}},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/mission/requester":{"get":{"tags":["requester-mission-controller"],"summary":"获得已发布的任务","description":"获得本发布者已发布的所有任务","operationId":"queryOnesUsingGET","consumes":["application/json"],"produces":["*/*"],"responses":{"200":{"description":"Returns current user's missions","schema":{"$ref":"#/definitions/MissionQueryResponse"}},"401":{"description":"Not login","schema":{"$ref":"#/definitions/WrongResponse"}},"403":{"description":"Not requester","schema":{"$ref":"#/definitions/WrongResponse"}},"404":{"description":"Not Found"}}}},"/mission/requester/{missionId}":{"get":{"tags":["requester-mission-controller"],"summary":"查看任务细节","description":"查询该任务细节","operationId":"queryMissionDetailUsingGET","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"missionId","in":"path","description":"任务ID","required":true,"type":"string"}],"responses":{"200":{"description":"Returns the detail of the mission","schema":{"$ref":"#/definitions/MissionQueryDetailResponse"}},"401":{"description":"Not login","schema":{"$ref":"#/definitions/WrongResponse"}},"403":{"description":"Not requester or not the author of the mission","schema":{"$ref":"#/definitions/WrongResponse"}},"404":{"description":"mission not found","schema":{"$ref":"#/definitions/WrongResponse"}}}}},"/mission/requester/{missionId}/instances/{instanceId}":{"get":{"tags":["requester-mission-controller"],"summary":"查看任务实例详情","description":"查询任务实例的详情","operationId":"queryInstanceUsingGET","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"missionId","in":"path","description":"任务ID","required":true,"type":"string"},{"name":"instanceId","in":"path","description":"实例ID","required":true,"type":"string"}],"responses":{"200":{"description":"Returns the instance","schema":{"$ref":"#/definitions/MissionInstanceQueryDetailResponse"}},"401":{"description":"Not login","schema":{"$ref":"#/definitions/WrongResponse"}},"403":{"description":"Not requester or not the author of the mission","schema":{"$ref":"#/definitions/WrongResponse"}},"404":{"description":"mission or instance not found","schema":{"$ref":"#/definitions/WrongResponse"}}}}},"/mission/worker":{"get":{"tags":["worker-mission-controller"],"summary":"工人查看所有任务","description":"工人查看自己已接的所有任务","operationId":"queryOnesAllMissionsUsingGET","consumes":["application/json"],"produces":["*/*"],"responses":{"200":{"description":"Returns current user's missions","schema":{"$ref":"#/definitions/MissionQueryResponse"}},"401":{"description":"Not login","schema":{"$ref":"#/definitions/WrongResponse"}},"403":{"description":"Not worker","schema":{"$ref":"#/definitions/WrongResponse"}},"404":{"description":"Not Found"}}}},"/mission/worker/{missionId}":{"get":{"tags":["worker-mission-controller"],"summary":"工人获取任务信息","description":"工人获取自己领取任务的实例的信息","operationId":"getInstanceInformationUsingGET","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"missionId","in":"path","description":"任务ID","required":true,"type":"string"}],"responses":{"200":{"description":"Returns the instance","schema":{"$ref":"#/definitions/MissionInstanceDetailVo"}},"401":{"description":"Not login","schema":{"$ref":"#/definitions/WrongResponse"}},"403":{"description":"Not worker","schema":{"$ref":"#/definitions/WrongResponse"}},"404":{"description":"mission id not found or mission isn't accepted","schema":{"$ref":"#/definitions/WrongResponse"}}}},"post":{"tags":["worker-mission-controller"],"summary":"工人提交任务","description":"工人提交当前任务","operationId":"submitUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"in":"body","name":"mission","description":"mission","required":true,"schema":{"$ref":"#/definitions/MissionVo"}},{"in":"body","name":"dataType","description":"任务类型","required":true,"schema":{"type":"string"}},{"name":"missionId","in":"path","description":"任务ID","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Response"}},"201":{"description":"Progress saved.","schema":{"$ref":"#/definitions/SuccessResponse"}},"401":{"description":"Not login","schema":{"$ref":"#/definitions/WrongResponse"}},"403":{"description":"Not worker","schema":{"$ref":"#/definitions/WrongResponse"}},"404":{"description":"mission id not found or mission isn't accepted","schema":{"$ref":"#/definitions/WrongResponse"}}}},"put":{"tags":["worker-mission-controller"],"summary":"工人保存任务进度","description":"工人保存当前任务的实例的进度","operationId":"saveProgressUsingPUT","consumes":["application/json"],"produces":["*/*"],"parameters":[{"in":"body","name":"mission","description":"mission","required":true,"schema":{"$ref":"#/definitions/MissionVo"}},{"in":"body","name":"dataType","description":"任务类型","required":true,"schema":{"type":"string"}},{"name":"missionId","in":"path","description":"任务ID","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Response"}},"201":{"description":"Progress saved.","schema":{"$ref":"#/definitions/SuccessResponse"}},"401":{"description":"Not login","schema":{"$ref":"#/definitions/WrongResponse"}},"403":{"description":"Not worker","schema":{"$ref":"#/definitions/WrongResponse"}},"404":{"description":"mission id not found or mission isn't accepted","schema":{"$ref":"#/definitions/WrongResponse"}}}},"delete":{"tags":["worker-mission-controller"],"summary":"工人放弃任务","description":"工人放弃自己已接的所有任务","operationId":"abortUsingDELETE","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"missionId","in":"path","description":"任务ID","required":true,"type":"string"}],"responses":{"200":{"description":"Mission abandoned.","schema":{"$ref":"#/definitions/SuccessResponse"}},"401":{"description":"Not login","schema":{"$ref":"#/definitions/WrongResponse"}},"204":{"description":"No Content"},"403":{"description":"Not worker","schema":{"$ref":"#/definitions/WrongResponse"}},"404":{"description":"mission id not found or mission isn't accepted","schema":{"$ref":"#/definitions/WrongResponse"}}}}},"/upload/mission/image/{missionId}":{"post":{"tags":["mission-upload-controller"],"summary":"发布者上传文件","description":"发布者上传本次任务的图片，传输时限为10min","operationId":"uploadFilesUsingPOST","consumes":["multipart/form-data"],"produces":["*/*"],"parameters":[{"in":"body","name":"multipartFile","description":"图片","required":true,"schema":{"type":"string"}},{"in":"body","name":"order","description":"图片顺序","required":true,"schema":{"type":"string"}},{"in":"body","name":"isCover","description":"图片是否是封面图","required":true,"schema":{"type":"string"}},{"name":"missionId","in":"path","description":"任务ID","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Response"}},"201":{"description":"Image uploaded","schema":{"$ref":"#/definitions/UploadMissionImageResponse"}},"401":{"description":"Unauthorized"},"403":{"description":"Upload session timed out","schema":{"$ref":"#/definitions/WrongResponse"}},"404":{"description":"Upload session id not exist","schema":{"$ref":"#/definitions/WrongResponse"}}}}}},"definitions":{"UserRegisterResponse":{"type":"object","properties":{"email":{"type":"string"},"jwtRoles":{"$ref":"#/definitions/Collection«JwtRole»"},"token":{"type":"string"}}},"SuccessResponse":{"type":"object","properties":{"description":{"type":"string"},"infoCode":{"type":"integer","format":"int32"}}},"MissionInstanceDetailVo":{"type":"object"},"InputStream":{"type":"object"},"MissionCreateVo":{"type":"object"},"MissionCreateResponse":{"type":"object"},"MissionPublicResponse":{"type":"object"},"Response":{"type":"object"},"MultipartFile":{"type":"object","properties":{"bytes":{"type":"array","items":{"type":"string","format":"byte"}},"contentType":{"type":"string"},"empty":{"type":"boolean"},"inputStream":{"$ref":"#/definitions/InputStream"},"name":{"type":"string"},"originalFilename":{"type":"string"},"size":{"type":"integer","format":"int64"}}},"MissionVo":{"type":"object"},"MissionQueryResponse":{"type":"object"},"UserLoginResponse":{"type":"object","properties":{"email":{"type":"string"},"jwtRoles":{"$ref":"#/definitions/Collection«JwtRole»"},"token":{"type":"string"}}},"MissionInstanceQueryDetailResponse":{"type":"object"},"Collection«JwtRole»":{"type":"object"},"MissionQueryDetailResponse":{"type":"object"},"JwtRole":{"type":"object","properties":{"authority":{"type":"string"}}},"WrongResponse":{"type":"object","properties":{"description":{"type":"string"},"infoCode":{"type":"integer","format":"int32"}}},"UploadMissionImageResponse":{"type":"object"}}}